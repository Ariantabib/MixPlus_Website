<!DOCTYPE html>
<html lang="fa" dir="rtl" data-theme="light" class="theme-light lang-fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">میکس‌پلاس | MixPlus</title>
  <meta name="description" content="Premium Kitchen Products with Italian Design">
  
  <style>
    /* ==================== FONTS & VARS ==================== */
    @font-face {
      font-family: 'Kalameh';
      src: url('fonts/KALAMEH-REGULAR.woff2') format('woff2');
      font-weight: 400; font-style: normal; font-display: swap;
    }
    @font-face {
      font-family: 'Kalameh';
      src: url('fonts/KALAMEH-BOLD.woff2') format('woff2');
      font-weight: 700; font-style: normal; font-display: swap;
    }
    
    :root {
      --font-fa: 'Kalameh', 'Vazirmatn', sans-serif;
      --font-en: 'Montserrat', sans-serif;
      --brand: #0fa99c;
      --brand-hover: #0c867b;
      
      /* Light Mode */
      --bg: #ffffff;
      --fg: #111827;
      --text-muted: #6b7280;
      --card: #f9fafb; 
      --stroke: rgba(17, 17, 17, 0.08);
      --glass-bg: rgba(255, 255, 255, 0.5); 
      --header-bg-solid: #ffffff;
      --header-border: rgba(0, 0, 0, 0.05);
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
      --shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.1);
    }
    
    /* Dark Mode */
    [data-theme="dark"] {
      --bg: #0f172a;
      --fg: #f8fafc;
      --text-muted: #94a3b8;
      --card: #1e293b;
      --stroke: rgba(255, 255, 255, 0.08);
      --glass-bg: rgba(15, 23, 42, 0.5); 
      --header-bg-solid: #0f172a;
      --header-border: rgba(255, 255, 255, 0.05);
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.4);
      --shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.5);
    }
    
    /* ==================== RESET & BASE ==================== */
    * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
    html { scroll-behavior: smooth; font-size: 16px; }
    
    body {
      font-family: var(--font-fa);
      background-color: var(--bg);
      color: var(--fg);
      line-height: 1.7;
      transition: background-color 0.3s ease, color 0.3s ease;
      overflow-x: hidden;
    }
    @media (max-width: 968px) { body { padding-bottom: 80px; } }
    
    .lang-en body { font-family: var(--font-en); }
    
    a { text-decoration: none; color: inherit; transition: all 0.2s ease; }
    ul { list-style: none; }
    button { border: none; background: none; cursor: pointer; font-family: inherit; }
    img { max-width: 100%; display: block; }
    .hidden { display: none !important; }

    /* ==================== HEADER ==================== */
    .mix-header {
      position: fixed; top: 0; left: 0; right: 0;
      height: 90px; z-index: 1000;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-bottom: 1px solid transparent;
    }
    
    .mix-header--scrolled {
      height: 75px; background: var(--header-bg-solid);
      box-shadow: var(--shadow-sm);
      border-bottom: 1px solid var(--header-border);
    }

    .mix-header__container {
      max-width: 1600px; margin: 0 auto; height: 100%;
      padding: 0 2rem; display: flex; align-items: center;
      justify-content: space-between; position: relative; min-width: 0;
    }
    
    .mix-header__logo {
      position: absolute; left: 50%; top: 50%;
      transform: translate(-50%, -50%); z-index: 1002;
      display: flex; align-items: center;
    }
    .mix-header__logo img { height: 42px; width: auto; }

    .mix-header__nav {
      display: flex; align-items: center; gap: 0.5rem; 
      flex-shrink: 1; min-width: 0;
    }
    
    /* RTL Logic */
    html[dir="rtl"] .mix-header__nav--primary {
      order: 1; margin-right: auto; padding-left: 8rem; 
    }
    html[dir="rtl"] .mix-header__nav--secondary {
      order: 3; margin-left: auto; padding-right: 8rem; 
    }
    
    /* LTR Logic */
    html[dir="ltr"] .mix-header__nav--primary {
      order: 1; margin-left: auto; padding-right: 10rem; 
    }
    html[dir="ltr"] .mix-header__nav--secondary {
      order: 3; margin-right: auto; padding-left: 10rem; 
    }
    
    .mix-header__item {
      padding: 0.5rem 0.75rem; color: var(--fg); font-weight: 500;
      font-size: 0.95rem; cursor: pointer; position: relative;
      white-space: nowrap; transition: color 0.2s ease;
    }
    .mix-header__item:hover { color: var(--brand); }
    
    .mix-header__divider {
      width: 1px; height: 20px; background: var(--stroke); margin: 0 0.5rem;
    }

    .mix-header__icon-btn {
      width: 38px; height: 38px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      color: var(--fg); transition: all 0.3s ease;
    }
    .mix-header__icon-btn:hover {
      background: var(--card); color: var(--brand); transform: rotate(15deg);
    }

    /* ==================== MENUS ==================== */
    .mix-megamenu {
      position: absolute; top: calc(100% + 20px);
      background: var(--bg); border: none; border-radius: 12px;
      box-shadow: var(--shadow-lg); opacity: 0; visibility: hidden;
      transform: translateY(-10px); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 400px; z-index: 100; padding: 0.5rem 0; overflow: hidden;
    }
    html[dir="rtl"] .mix-megamenu { right: 0; }
    html[dir="ltr"] .mix-megamenu { left: 0; }
    .mix-megamenu.active { opacity: 1; visibility: visible; transform: translateY(0); }
    .mix-megamenu__content { display: grid; gap: 2rem; }
    #products-mega .mix-megamenu__content { grid-template-columns: 1fr 1.5fr; padding: 0 1rem; }

    .mix-megamenu__root-item {
      padding: 1rem; cursor: pointer; border: none;
      border-bottom: 1px solid var(--stroke); border-radius: 0;
      transition: all 0.2s; font-weight: 600; color: var(--fg);
      background: transparent; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    .mix-megamenu__root-item:last-child { border-bottom: none; }
    .mix-megamenu__root-item:hover, .mix-megamenu__root-item.active {
      background: rgba(15, 169, 156, 0.03); 
      border-color: var(--brand); color: var(--brand);
      padding-inline-start: 1.25rem; 
    }
    .mix-megamenu__sub-item {
      display: block; padding: 1rem; color: var(--fg);
      border-radius: 0; border-bottom: 1px solid var(--stroke);
      transition: all 0.2s; white-space: nowrap;
    }
    .mix-megamenu__sub-item:last-child { border-bottom: none; }
    .mix-megamenu__sub-item:hover {
      color: var(--brand); padding-inline-start: 1.25rem; 
    }

    .mix-dropdown-simple { display: grid; gap: 0; width: 100%; }
    .mix-dropdown-simple a {
      display: flex; align-items: center; padding: 1rem; font-size: 0.95rem;
      border: none; border-bottom: 1px solid var(--stroke);
      border-radius: 0; transition: all 0.2s;
      white-space: nowrap; background: transparent;
    }
    .mix-dropdown-simple a:last-child { border-bottom: none; }
    .mix-dropdown-simple a:hover {
      background: rgba(15, 169, 156, 0.03); color: var(--brand);
      padding-inline-start: 1.25rem;
    }

    /* ==================== HERO ==================== */
    .mix-hero {
      position: relative; height: 100vh; min-height: 650px;
      overflow: hidden; display: flex; align-items: center; justify-content: center;
    }
    .mix-hero__video-container {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
    }
    .mix-hero__video {
      width: 100%; height: 100%; object-fit: cover; transition: opacity 0.5s ease;
    }
    .mix-hero__overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.7)); z-index: 1;
    }
    .mix-hero__content {
      position: relative; z-index: 2; text-align: center; color: white;
      max-width: 900px; padding: 0 1.5rem; min-height: 120px;
      transition: opacity 0.5s ease;
    }
    .mix-hero__title {
      font-size: clamp(2.5rem, 5vw, 4.5rem);
      font-weight: 800; line-height: 1.1; margin-bottom: 1rem; min-height: 1.1em;
    }
    .mix-hero__subtitle {
      font-size: clamp(1.1rem, 2vw, 1.6rem); opacity: 0.9;
      min-height: 1.6em; color: rgba(255,255,255,0.9);
    }
    .cursor {
      display: inline-block; width: 3px; height: 1em;
      background-color: var(--brand); animation: blink 1s step-end infinite;
      vertical-align: middle; margin-left: 5px;
    }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    .mix-hero__scroll-arrow {
      position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%);
      z-index: 2; cursor: pointer; color: white; opacity: 0.8;
      animation: bounce 2s infinite; width: 80px; height: 80px;
    }
    .mix-hero__scroll-arrow img {
      width: 100%; height: 100%; filter: brightness(0) invert(1); 
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {transform: translateX(-50%) translateY(0);}
      40% {transform: translateX(-50%) translateY(-15px);}
      60% {transform: translateX(-50%) translateY(-7px);}
    }

    /* ==================== SECTIONS ==================== */
    .mix-section {
      /* کاهش پدینگ عمومی برای فشرده‌تر شدن کل صفحه */
      padding: 3rem 1.5rem; 
      max-width: 1440px; margin: 0 auto;
    }
    
    .mix-section-title {
      text-align: center; margin-bottom: 2.5rem; /* کاهش فاصله زیر تایتل‌ها */
    }
    .mix-section-title h2 {
      font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem;
    }
    .mix-section-title p {
      color: var(--text-muted); font-size: 1.1rem; max-width: 700px; margin: 0 auto;
    }

    /* GRID */
    .mix-grid {
      display: grid; gap: 1.5rem; grid-template-columns: repeat(4, 1fr);
    }
    @media (max-width: 1024px) { .mix-grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; } }
    @media (max-width: 600px) { 
      .mix-grid { grid-template-columns: repeat(2, 1fr); gap: 0.8rem; } 
      .mix-card { aspect-ratio: 1/1; }
    }

    .mix-card {
      position: relative; border-radius: 16px; overflow: hidden;
      aspect-ratio: 3/4; cursor: pointer; background: var(--card);
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }
    .mix-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); }
    .mix-card__image { width: 100%; height: 100%; object-fit: cover; }
    .mix-card__overlay {
      position: absolute; bottom: 0; left: 0; right: 0;
      padding: 1.5rem 1rem;
      background: linear-gradient(to top, rgba(0,0,0,0.85), transparent);
      color: white; height: 40%; display: flex; flex-direction: column; justify-content: flex-end;
    }
    .mix-card__title { font-size: 1.1rem; font-weight: 700; }

    /* ==================== FULL BLEED BANNER ==================== */
    .mix-fullbleed {
      position: relative; height: 35vh; min-height: 250px; /* ارتفاع کمی کمتر برای فشرده‌تر شدن */
      display: flex; align-items: center; justify-content: center; overflow: hidden;
      margin: 1rem 0; /* مارجین کمتر */
    }
    .mix-fullbleed__image {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
    }
    .mix-fullbleed__overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
    }
    .mix-fullbleed__content {
      position: relative; z-index: 2; text-align: center; color: white; padding: 2rem;
    }
    .mix-fullbleed__title { font-size: clamp(1.8rem, 4vw, 2.5rem); font-weight: 800; margin-bottom: 1rem; }
    
    /* ==================== COMPONENTS ==================== */
    .mix-btn {
      display: inline-block; padding: 0.8rem 2rem;
      border-radius: 50px; font-weight: 700;
      transition: all 0.3s ease; cursor: pointer; font-size: 0.95rem;
    }
    .mix-btn--primary {
      background: var(--brand); color: white;
      box-shadow: 0 4px 15px rgba(15, 169, 156, 0.3);
    }
    .mix-btn--primary:hover { background: var(--brand-hover); transform: translateY(-3px); }
    .mix-btn--outline {
      background: transparent; color: var(--fg); border: 2px solid var(--stroke);
    }
    .mix-btn--outline:hover { border-color: var(--brand); color: var(--brand); }

    .mix-video-embed {
      position: relative; padding-bottom: 56.25%; height: 0;
      overflow: hidden; border-radius: 16px; background: #000; box-shadow: var(--shadow-lg);
    }
    .mix-video-embed iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

    /* SOCIAL STRIP */
    .mix-social-strip {
      display: flex; align-items: center; justify-content: center;
      gap: 1.5rem; padding: 3rem 1rem; margin: 2rem auto; max-width: 100%;
    }
    .mix-social-icon {
      width: 60px; height: 60px; border-radius: 12px; 
      display: flex; align-items: center; justify-content: center;
      background: var(--card); border: 1px solid var(--stroke);
      transition: all 0.3s; padding: 1rem; 
    }
    .mix-social-icon img { width: 100%; height: 100%; object-fit: contain; }
    .theme-light .mix-social-icon img,
    .theme-light .mix-dropdown-simple img { filter: brightness(0); }
    .theme-dark .mix-social-icon img,
    .theme-dark .mix-dropdown-simple img { filter: brightness(0) invert(1); }
    .mix-social-icon:hover {
      transform: translateY(-5px); border-color: var(--brand);
      box-shadow: 0 10px 20px rgba(15, 169, 156, 0.2);
    }

    /* Footer */
    .mix-footer {
      background: var(--card); border-top: 1px solid var(--stroke);
      padding: 5rem 2rem 1rem;
    }
    .mix-footer__grid {
      max-width: 1400px; margin: 0 auto;
      display: grid; grid-template-columns: 1.5fr 1fr 1fr 1fr; gap: 3rem;
      margin-bottom: 4rem;
    }
    @media (max-width: 1024px) { .mix-footer__grid { grid-template-columns: 1fr 1fr; } }
    @media (max-width: 600px) { .mix-footer__grid { grid-template-columns: 1fr; text-align: center; } }

    .mix-footer__col h4 { font-size: 1.1rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--fg); }
    .mix-footer__links li { margin-bottom: 0.8rem; }
    .mix-footer__links a { color: var(--text-muted); font-size: 0.95rem; }
    .mix-footer__links a:hover { color: var(--brand); padding-inline-start: 5px; }
    .mix-footer__bottom {
      border-top: 1px solid var(--stroke); padding-top: 2rem;
      display: flex; align-items: center; justify-content: space-between;
      flex-wrap: wrap; gap: 1rem; text-align: center; max-width: 1400px; margin: 0 auto;
    }
    @media (max-width: 600px) { .mix-footer__bottom { flex-direction: column; } }

    /* ==================== MOBILE BOTTOM NAV ==================== */
    .mix-mobile-bottom-bar {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%) translateY(150%); width: 90%; max-width: 400px;
      background: var(--bg); backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px); border: 1px solid var(--stroke);
      border-radius: 20px; display: flex; justify-content: space-around;
      align-items: center; padding: 0.8rem; z-index: 2000;
      box-shadow: var(--shadow-lg);
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .mix-mobile-bottom-bar.visible { transform: translateX(-50%) translateY(0); }
    
    .mobile-nav-item {
      display: flex; flex-direction: column; align-items: center;
      justify-content: center; color: var(--text-muted); font-size: 0.75rem;
      cursor: pointer; gap: 4px;
    }
    .mobile-nav-item svg { width: 24px; height: 24px; stroke-width: 2; }
    .mobile-nav-item:hover, .mobile-nav-item.active { color: var(--brand); }
    .mobile-nav-item:hover svg { transform: translateY(-2px); }

    .mix-mobile-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
      background: rgba(0,0,0,0.6); z-index: 1999; opacity: 0; visibility: hidden;
      transition: 0.3s; backdrop-filter: blur(5px);
    }
    .mix-mobile-overlay.active { opacity: 1; visibility: visible; }
    
    .mix-mobile-menu-full {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(0.9); width: 85%; max-width: 350px;
      background: var(--bg); border-radius: 20px; padding: 2rem;
      z-index: 2000; opacity: 0; visibility: hidden; transition: 0.3s;
      box-shadow: var(--shadow-lg); border: 1px solid var(--stroke);
    }
    .mix-mobile-menu-full.active {
      opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1);
    }
    .mix-mobile-full-link {
      display: block; padding: 1rem 0; border-bottom: 1px solid var(--stroke);
      font-size: 1.1rem; font-weight: 500; color: var(--fg);
    }
    .mix-mobile-full-link:last-child { border-bottom: none; }

    @media (min-width: 969px) {
      .mix-mobile-bottom-bar { display: none !important; }
      .mix-mobile-menu-full { display: none !important; }
      .mix-mobile-overlay { display: none !important; }
    }

    /* Desktop Navigation Visibility */
    @media (min-width: 969px) { .mix-header__nav { display: flex !important; } }
    @media (max-width: 968px) { .mix-header__nav { display: none !important; } }

    /* Responsive Header Adjustments */
    @media (max-width: 1300px) {
      html[dir="rtl"] .mix-header__nav--primary { padding-left: 6rem; }
      html[dir="rtl"] .mix-header__nav--secondary { padding-right: 6rem; }
      html[dir="ltr"] .mix-header__nav--primary { padding-right: 7rem; }
      html[dir="ltr"] .mix-header__nav--secondary { padding-left: 7rem; }
    }
    @media (max-width: 1100px) {
      .mix-header__item { font-size: 0.9rem; }
      .mix-header__logo img { height: 38px; }
      html[dir="rtl"] .mix-header__nav--primary { padding-left: 3rem; }
      html[dir="rtl"] .mix-header__nav--secondary { padding-right: 3rem; }
      html[dir="ltr"] .mix-header__nav--primary { padding-right: 4rem; }
      html[dir="ltr"] .mix-header__nav--secondary { padding-left: 4rem; }
    }
    
    .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.5, 0, 0, 1); }
    .reveal.active { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>

  <!-- MOBILE BOTTOM NAV -->
  <nav class="mix-mobile-bottom-bar" id="mobile-nav-bar">
    <div class="mobile-nav-item" onclick="window.scrollTo(0,0)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
      <span class="text-fa">خانه</span><span class="text-en hidden">Home</span>
    </div>
    <div class="mobile-nav-item" onclick="document.getElementById('categories').scrollIntoView()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
      <span class="text-fa">محصولات</span><span class="text-en hidden">Prod</span>
    </div>
    <div class="mobile-nav-item" id="mobile-catalog-btn">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
      <span class="text-fa">کاتالوگ</span><span class="text-en hidden">Cat</span>
    </div>
    <div class="mobile-nav-item" id="mobile-menu-trigger">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
      <span class="text-fa">منو</span><span class="text-en hidden">Menu</span>
    </div>
  </nav>

  <!-- MOBILE MENU OVERLAY -->
  <div class="mix-mobile-overlay" id="mobile-overlay"></div>
  <div class="mix-mobile-menu-full" id="mobile-menu-full">
    <a href="#" class="mix-mobile-full-link">
      <span class="text-fa">خدمات پس از فروش</span><span class="text-en hidden">After-Sales</span>
    </a>
    <a href="#" class="mix-mobile-full-link">
      <span class="text-fa">نمایندگی‌ها</span><span class="text-en hidden">Dealers</span>
    </a>
    <a href="#" class="mix-mobile-full-link">
      <span class="text-fa">درباره ما</span><span class="text-en hidden">About Us</span>
    </a>
    <div class="mix-header__divider" style="margin: 1rem 0;"></div>
    <a href="#" class="mix-mobile-full-link" id="mobile-lang-link">
      <span class="text-fa">تغییر زبان</span><span class="text-en hidden">Switch Lang</span>
    </a>
    <a href="#" class="mix-mobile-full-link" id="mobile-theme-link">
      <span class="text-fa">تغییر تم</span><span class="text-en hidden">Switch Theme</span>
    </a>
  </div>

  <!-- HEADER (Desktop) -->
  <header class="mix-header" id="header">
    <div class="mix-header__container">
      
      <!-- PRIMARY NAV -->
      <nav class="mix-header__nav mix-header__nav--primary">
        <div style="position: relative;">
          <button class="mix-header__item" id="products-trigger">
            <span class="text-fa">محصولات</span>
            <span class="text-en hidden">Products</span>
          </button>
          <div class="mix-megamenu" id="products-mega">
            <div class="mix-megamenu__content">
              <div class="mix-megamenu__col">
                <div class="mix-megamenu__root-item active" data-category="hob">
                  <span class="text-fa">اجاق گاز</span><span class="text-en hidden">Hob</span>
                </div>
                <div class="mix-megamenu__root-item" data-category="sink">
                  <span class="text-fa">سینک ظرف‌شویی</span><span class="text-en hidden">Sink</span>
                </div>
                <div class="mix-megamenu__root-item" data-category="oven">
                  <span class="text-fa">فر توکار</span><span class="text-en hidden">Built-in Oven</span>
                </div>
                <div class="mix-megamenu__root-item" data-category="hood">
                  <span class="text-fa">هود</span><span class="text-en hidden">Hood</span>
                </div>
              </div>
              <div class="mix-megamenu__col" id="products-subs"></div>
            </div>
          </div>
        </div>
        
        <div class="mix-header__divider"></div>
        
        <a href="#" class="mix-header__item">
          <span class="text-fa">نمایندگی‌های مجاز</span>
          <span class="text-en hidden">Dealers</span>
        </a>
        
        <div class="mix-header__divider"></div>
        
        <div style="position: relative;">
          <button class="mix-header__item" id="aftersales-trigger">
            <span class="text-fa">خدمات پس از فروش</span>
            <span class="text-en hidden">After-Sales</span>
          </button>
          <div class="mix-megamenu" id="aftersales-mega">
            <div class="mix-dropdown-simple">
              <a href="#">
                <span class="text-fa">فرآیند رسیدگی به شکایات</span>
                <span class="text-en hidden">Complaint Process</span>
              </a>
              <a href="#">
                <span class="text-fa">شرایط گارانتی محصولات</span>
                <span class="text-en hidden">Warranty Terms</span>
              </a>
              <a href="#">
                <span class="text-fa">درخواست نصب محصول</span>
                <span class="text-en hidden">Installation Request</span>
              </a>
              <a href="#">
                <span class="text-fa">ثبت شکایت</span>
                <span class="text-en hidden">Register Complaint</span>
              </a>
            </div>
          </div>
        </div>
        
        <a href="#" class="mix-header__item">
          <span class="text-fa hidden"></span> 
          <span class="text-en">About Us</span>
        </a>
      </nav>
      
      <!-- CENTER LOGO -->
      <a href="#" class="mix-header__logo">
        <img src="images/logos/logo-light.svg" alt="MixPlus Logo" class="logo-light">
        <img src="images/logos/logo-dark.svg" alt="MixPlus Logo" class="logo-dark hidden">
      </a>
      
      <!-- SECONDARY NAV -->
      <nav class="mix-header__nav mix-header__nav--secondary">
        <button class="mix-header__icon-btn" id="search-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
        </button>
        
        <div class="mix-header__divider"></div>
        
        <div style="position: relative;">
          <button class="mix-header__item" id="social-trigger">#</button>
          <div class="mix-megamenu" id="social-dropdown" style="min-width: 200px;">
             <div class="mix-dropdown-simple">
              <a href="https://www.linkedin.com/company/mixplus" target="_blank" style="justify-content: flex-start; gap: 10px;">
                <img src="svg/linkedin.svg" style="width: 20px; height: 20px;" alt="LinkedIn">
                LinkedIn
              </a>
              <a href="https://www.instagram.com/mixplus.co" target="_blank" style="justify-content: flex-start; gap: 10px;">
                <img src="svg/instagram.svg" style="width: 20px; height: 20px;" alt="Instagram">
                Instagram
              </a>
              <a href="https://www.youtube.com/@mixplusmovie" target="_blank" style="justify-content: flex-start; gap: 10px;">
                <img src="svg/youtube.svg" style="width: 20px; height: 20px;" alt="YouTube">
                YouTube
              </a>
              <a href="https://www.aparat.com/mixplus.co" target="_blank" style="justify-content: flex-start; gap: 10px;">
                <img src="svg/aparat.svg" style="width: 20px; height: 20px;" alt="Aparat">
                Aparat
              </a>
              <a href="https://t.me/mixplus_co_bot" target="_blank" style="justify-content: flex-start; gap: 10px;">
                <img src="svg/telegram.svg" style="width: 20px; height: 20px;" alt="Telegram">
                Telegram
              </a>
             </div>
          </div>
        </div>
        
        <div class="mix-header__divider"></div>
        
        <a href="#" class="mix-header__item" id="catalog-link">
          <span class="text-fa">دانلود کاتالوگ</span>
          <span class="text-en hidden">Download Catalog</span>
        </a>
        
        <div class="mix-header__divider"></div>
        
        <div style="position: relative;">
          <button class="mix-header__item" id="lang-trigger">
            <span class="text-fa">فارسی</span>
            <span class="text-en hidden">English</span>
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; margin-inline-start: 4px;"><polyline points="6 9 12 15 18 9"></polyline></svg>
          </button>
          <div class="mix-megamenu" id="lang-dropdown" style="min-width: 180px;">
             <div class="mix-dropdown-simple">
              <a href="#" id="switch-lang">
                <span class="text-fa hidden">English</span>
                <span class="text-en hidden">فارسی</span>
              </a>
             </div>
          </div>
        </div>
        
        <div class="mix-header__divider"></div>
        
        <button class="mix-header__icon-btn" id="theme-toggle">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="theme-icon-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="theme-icon-moon" class="hidden"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
        </button>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="mix-hero" id="hero-section">
    <div class="mix-hero__video-container">
      <video class="mix-hero__video" id="hero-video" autoplay muted playsinline loop>
        <source src="videos/hero-01.mp4" type="video/mp4">
      </video>
    </div>
    <div class="mix-hero__overlay"></div>
    <div class="mix-hero__content">
      <h1 class="mix-hero__title"><span id="hero-title-text"></span></h1>
      <p class="mix-hero__subtitle"><span id="hero-subtitle-text"></span><span class="cursor"></span></p>
    </div>
    <div class="mix-hero__scroll-arrow" id="scroll-arrow">
      <img src="svg/scroll-arrow.svg" alt="Scroll Down">
    </div>
  </section>

  <!-- CATEGORIES GRID -->
  <section class="mix-section" id="categories">
    <div class="mix-grid reveal">
      <a href="#" class="mix-card">
        <img src="images/categories/hob.jpg" alt="Hob" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">اجاق گاز</span><span class="text-en hidden">Hob</span></h3></div>
      </a>
      <a href="#" class="mix-card">
        <img src="images/categories/sink.jpg" alt="Sink" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">سینک ظرف‌شویی</span><span class="text-en hidden">Sink</span></h3></div>
      </a>
      <a href="#" class="mix-card">
        <img src="images/categories/oven.jpg" alt="Oven" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">فر توکار</span><span class="text-en hidden">Built-in Oven</span></h3></div>
      </a>
      <a href="#" class="mix-card">
        <img src="images/categories/hood.jpg" alt="Hood" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">هود</span><span class="text-en hidden">Hood</span></h3></div>
      </a>
    </div>
  </section>

  <!-- INTRO SECTION -->
  <section class="mix-section mix-section--tight reveal">
    <div class="mix-section-title">
      <h2>
        <span class="text-fa">میکس‌پلاس؛ کیفیت و زیبایی در آشپزخانه شما</span>
        <span class="text-en hidden">MixPlus: Quality and Beauty in Your Kitchen</span>
      </h2>
      <p>
        <span class="text-fa">ما با الهام از طراحی ایتالیایی و استفاده از بهترین مواد اولیه، محصولاتی تولید می‌کنیم که علاوه بر زیبایی، دوام و کارایی بالایی دارند.</span>
        <span class="text-en hidden">Inspired by Italian design and using of finest raw materials, we manufacture products that combine beauty with durability and high performance.</span>
      </p>
    </div>
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
      <a href="#categories" class="mix-btn mix-btn--primary">
        <span class="text-fa">مشاهده محصولات</span>
        <span class="text-en hidden">View Products</span>
      </a>
      <a href="#" class="mix-btn mix-btn--outline">
        <span class="text-fa">درباره میکس‌پلاس</span>
        <span class="text-en hidden">About MixPlus</span>
      </a>
      <a href="#" class="mix-btn mix-btn--outline" id="catalog-hero-btn">
        <span class="text-fa">دانلود کاتالوگ</span>
        <span class="text-en hidden">Download Catalog</span>
      </a>
    </div>
  </section>

  <!-- FULL BLEED BANNER 1 -->
  <section class="mix-fullbleed reveal">
    <img src="images/banners/fullbleed-01.jpg" alt="Italian Design" class="mix-fullbleed__image">
    <div class="mix-fullbleed__overlay"></div>
    <div class="mix-fullbleed__content">
      <h2 class="mix-fullbleed__title">
        <span class="text-fa">طراحی الهام‌گرفته از ایتالیا</span>
        <span class="text-en hidden">Italian-Inspired Design</span>
      </h2>
      <p>
        <span class="text-fa">زیبایی، کیفیت و نوآوری در هر جزئیات</span>
        <span class="text-en hidden">Beauty, quality and innovation in every detail</span>
      </p>
    </div>
  </section>

  <!-- FACTORY VIDEO -->
  <section class="mix-section">
    <div class="mix-section-title reveal">
      <h2>
        <span class="text-fa">بازدید از کارخانه میکس‌پلاس</span>
        <span class="text-en hidden">Visit MixPlus Factory</span>
      </h2>
    </div>
    <div style="max-width: 900px; margin: 0 auto;" class="reveal">
      <div class="mix-video-embed">
        <iframe id="factory-iframe" src="" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <!-- FULL BLEED BANNER 2 -->
  <section class="mix-fullbleed reveal">
    <img src="images/banners/fullbleed-02.jpg" alt="Quality" class="mix-fullbleed__image">
    <div class="mix-fullbleed__overlay"></div>
    <div class="mix-fullbleed__content">
      <h2 class="mix-fullbleed__title">
        <span class="text-fa">کیفیت بی‌نظیر، قیمت منصفانه</span>
        <span class="text-en hidden">Unmatched Quality, Fair Price</span>
      </h2>
      <p>
        <span class="text-fa">محصولات میکس‌پلاس، انتخابی هوشمندانه برای آشپزخانه شما</span>
        <span class="text-en hidden">MixPlus products, a smart choice for your kitchen</span>
      </p>
    </div>
  </section>

  <!-- EXTRA CARDS -->
  <section class="mix-section">
    <div class="mix-grid reveal">
      <a href="#" class="mix-card" style="aspect-ratio: 1/1;">
        <img src="images/categories/products.jpg" alt="Products" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">محصولات</span><span class="text-en hidden">Products</span></h3></div>
      </a>
      <a href="#" class="mix-card" style="aspect-ratio: 1/1;">
        <img src="images/categories/events.jpg" alt="Events" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">رویدادها</span><span class="text-en hidden">Events</span></h3></div>
      </a>
      <a href="#" class="mix-card" style="aspect-ratio: 1/1;">
        <img src="images/categories/services.jpg" alt="Services" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">خدمات</span><span class="text-en hidden">Services</span></h3></div>
      </a>
      <a href="#" class="mix-card" style="aspect-ratio: 1/1;">
        <img src="images/categories/training.jpg" alt="Training" class="mix-card__image">
        <div class="mix-card__overlay"><h3 class="mix-card__title"><span class="text-fa">آموزش</span><span class="text-en hidden">Training</span></h3></div>
      </a>
    </div>
  </section>

  <!-- FULL BLEED BANNER 3 -->
  <section class="mix-fullbleed reveal">
    <img src="images/banners/fullbleed-03.jpg" alt="Support" class="mix-fullbleed__image">
    <div class="mix-fullbleed__overlay"></div>
    <div class="mix-fullbleed__content">
      <h2 class="mix-fullbleed__title">
        <span class="text-fa">در کنار شما در هر لحظه</span>
        <span class="text-en hidden">With You Every Moment</span>
      </h2>
      <p>
        <span class="text-fa">میکس‌پلاس، نامی مطمئن در صنعت لوازم خانگی</span>
        <span class="text-en hidden">MixPlus, a trusted name in home appliances industry</span>
      </p>
    </div>
  </section>

  <!-- SOCIAL STRIP -->
  <section class="container">
    <div class="mix-social-strip reveal">
      <a href="https://www.linkedin.com/company/mixplus" target="_blank" class="mix-social-icon">
        <img src="svg/linkedin.svg" alt="LinkedIn">
      </a>
      <a href="https://www.instagram.com/mixplus.co" target="_blank" class="mix-social-icon">
        <img src="svg/instagram.svg" alt="Instagram">
      </a>
      <a href="https://www.youtube.com/@mixplusmovie" target="_blank" class="mix-social-icon">
        <img src="svg/youtube.svg" alt="YouTube">
      </a>
      <a href="https://www.aparat.com/mixplus.co" target="_blank" class="mix-social-icon">
        <img src="svg/aparat.svg" alt="Aparat">
      </a>
      <a href="https://t.me/mixplus_co_bot" target="_blank" class="mix-social-icon">
        <img src="svg/telegram.svg" alt="Telegram">
      </a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="mix-footer">
    <div class="mix-footer__grid">
      <div class="mix-footer__col">
        <img src="images/logos/logo-light.svg" alt="MixPlus" class="footer-logo-light" style="height: 40px; margin-bottom: 1.5rem;">
        <img src="images/logos/logo-dark.svg" alt="MixPlus" class="footer-logo-dark hidden" style="height: 40px; margin-bottom: 1.5rem;">
        <p style="color: var(--text-muted); font-size: 0.95rem; line-height: 1.8;">
          <span class="text-fa">ما با الهام از طراحی ایتالیایی و استفاده از بهترین مواد اولیه، محصولاتی تولید می‌کنیم که علاوه بر زیبایی، دوام و کارایی بالایی دارند.</span>
          <span class="text-en hidden">Inspired by Italian design and using the finest raw materials, we manufacture products that combine beauty with durability and high performance.</span>
        </p>
      </div>
      
      <div class="mix-footer__col">
        <h4>
          <span class="text-fa">لینک‌های سریع</span>
          <span class="text-en hidden">Quick Links</span>
        </h4>
        <ul class="mix-footer__links">
          <li><a href="#"><span class="text-fa">درباره ما</span><span class="text-en hidden">About Us</span></a></li>
          <li><a href="#"><span class="text-fa">محصولات</span><span class="text-en hidden">Products</span></a></li>
          <li><a href="#"><span class="text-fa">نمایندگی‌ها</span><span class="text-en hidden">Dealers</span></a></li>
          <li><a href="#"><span class="text-fa">تماس با ما</span><span class="text-en hidden">Contact Us</span></a></li>
        </ul>
      </div>
      
      <div class="mix-footer__col">
        <h4>
          <span class="text-fa">خدمات مشتریان</span>
          <span class="text-en hidden">Customer Service</span>
        </h4>
        <ul class="mix-footer__links">
          <li><a href="#"><span class="text-fa">شرایط گارانتی</span><span class="text-en hidden">Warranty</span></a></li>
          <li><a href="#"><span class="text-fa">شرایط بازگشت کالا</span><span class="text-en hidden">Return Policy</span></a></li>
          <li><a href="#"><span class="text-fa">سوالات متداول</span><span class="text-en hidden">FAQ</span></a></li>
          <li><a href="#"><span class="text-fa">درخواست نصب</span><span class="text-en hidden">Installation Request</span></a></li>
        </ul>
      </div>
      
      <div class="mix-footer__col">
        <h4>
          <span class="text-fa">تماس با ما</span>
          <span class="text-en hidden">Contact Us</span>
        </h4>
        <ul class="mix-footer__links">
          <li>
             <span class="text-fa">تهران، تهرانپارس، خیابان اتحاد، پلاک 1+66</span>
             <span class="text-en hidden">Tehran, Tehranpars, Ettehad St, No 1+66</span>
          </li>
          <li>
             <span class="text-fa">شماره تماس: 0217353</span>
             <span class="text-en hidden">Phone: 0217353</span>
          </li>
          <li>
             <span class="text-fa">خدمات پس از فروش: 02174905</span>
             <span class="text-en hidden">After-Sales: 02174905</span>
          </li>
          <li>info@mixplus.co</li>
        </ul>
      </div>
    </div>
    
    <div class="mix-footer__bottom">
      <p style="color: var(--text-muted); font-size: 0.9rem;">
        <span class="text-fa">© ۱۴۰۳ میکس‌پلاس. تمامی حقوق محفوظ است.</span>
        <span class="text-en hidden">© 2024 MixPlus. All rights reserved.</span>
      </p>
      <div style="display: flex; gap: 1.5rem;">
        <a href="#" class="mix-footer__link" style="font-size: 0.9rem;">
          <span class="text-fa">حریم خصوصی</span><span class="text-en hidden">Privacy Policy</span>
        </a>
        <a href="#" class="mix-footer__link" style="font-size: 0.9rem;">
          <span class="text-fa">قوانین استفاده</span><span class="text-en hidden">Terms of Use</span>
        </a>
      </div>
    </div>
  </footer>

  <script>
    // ==================== CONFIG & DATA ====================
    const videos = {
      aparat: 'https://www.aparat.com/video/video/embed/videohash/rqy7870/vt/frame',
      youtube: 'https://www.youtube.com/embed/eaICa0IHvu0'
    };
    
    const heroVideos = [
      'videos/hero-01.mp4',
      'videos/hero-02.mp4',
      'videos/hero-03.mp4',
      'videos/hero-04.mp4'
    ];
    
    const categories = {
      hob: { fa: [{ name: 'اجاق استیل' }, { name: 'اجاق شیشه‌ای' }], en: [{ name: 'Steel Hob' }, { name: 'Glass Hob' }] },
      sink: { fa: [{ name: 'سینک دست‌ساز' }, { name: 'گرانیتی' }], en: [{ name: 'Handmade' }, { name: 'Granite' }] },
      oven: { fa: [{ name: 'مشاهده همه' }], en: [{ name: 'View All' }] },
      hood: { fa: [{ name: 'هود توکار' }, { name: 'هود دیواری' }], en: [{ name: 'Built-in' }, { name: 'Wall' }] }
    };

    const heroSlides = {
      fa: [
        { title: 'کیفیت برتر با طراحی ایتالیایی', subtitle: 'محصولات آشپزخانه که زندگی شما را متحول می‌کنند' },
        { title: 'زیبایی در هر جزئیات', subtitle: 'تلفیق هنر و مهندسی در محصولات میکس‌پلاس' },
        { title: 'آسایش و راحتی واقعی', subtitle: 'تجربه آشپزی حرفه‌ای در خانه' }
      ],
      en: [
        { title: 'Premium Quality with Italian Design', subtitle: 'Kitchen products that transform your life' },
        { title: 'Beauty in Every Detail', subtitle: 'Combining art and engineering in MixPlus products' },
        { title: 'True Comfort and Ease', subtitle: 'Experience professional cooking at home' }
      ]
    };

    let currentLang = localStorage.getItem('mix_lang') || 'fa';
    let currentTheme = localStorage.getItem('mix_theme') || 'light';
    let currentVideoIndex = 0;
    let currentSlideIndex = 0;
    
    // ==================== FUNCTIONS ====================
    
    function init() {
      window.scrollTo(0, 0);
      setTheme(currentTheme);
      setLanguage(currentLang, false); 
      setupObservers();
      setupHeroVideoLoop();
      setupHeroTextLoop(); // شروع انیمیشن ساده
      setupMobileNavigation();
    }

    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      document.documentElement.classList.remove('theme-light', 'theme-dark');
      document.documentElement.classList.add(`theme-${theme}`);
      
      document.getElementById('theme-icon-sun').classList.toggle('hidden', theme === 'dark');
      document.getElementById('theme-icon-moon').classList.toggle('hidden', theme === 'light');
      
      const logoLight = document.querySelector('.logo-light');
      const logoDark = document.querySelector('.logo-dark');
      const footerLogoLight = document.querySelector('.footer-logo-light');
      const footerLogoDark = document.querySelector('.footer-logo-dark');
      
      if (theme === 'dark') {
        logoLight.classList.remove('hidden');
        logoDark.classList.add('hidden');
        footerLogoLight.classList.remove('hidden');
        footerLogoDark.classList.add('hidden');
      } else {
        logoLight.classList.add('hidden');
        logoDark.classList.remove('hidden');
        footerLogoLight.classList.add('hidden');
        footerLogoDark.classList.remove('hidden');
      }
      currentTheme = theme;
      localStorage.setItem('mix_theme', theme);
    }

    function setLanguage(lang, save = true) {
      currentLang = lang;
      const html = document.documentElement;
      const isFa = lang === 'fa';
      
      html.setAttribute('lang', lang);
      html.setAttribute('dir', isFa ? 'rtl' : 'ltr');
      html.classList.remove('lang-fa', 'lang-en');
      html.classList.add(`lang-${lang}`);

      document.querySelectorAll('.text-fa').forEach(el => el.classList.toggle('hidden', !isFa));
      document.querySelectorAll('.text-en').forEach(el => el.classList.toggle('hidden', isFa));

      const catalogLink = isFa ? 'docs/catalog-fa.pdf' : 'docs/catalog-en.pdf';
      document.getElementById('catalog-link').href = catalogLink;
      document.getElementById('catalog-hero-btn').href = catalogLink;
      document.getElementById('mobile-catalog-btn').onclick = () => window.open(catalogLink, '_blank');

      const videoSrc = isFa ? videos.aparat : videos.youtube;
      const iframe = document.getElementById('factory-iframe');
      if (iframe) iframe.src = videoSrc;

      const switchBtn = document.getElementById('switch-lang');
      const mobileLangBtn = document.getElementById('mobile-lang-link');
      if (isFa) {
        switchBtn.innerHTML = '<span class="text-en">English</span>';
        mobileLangBtn.innerHTML = '<span class="text-en">Switch to English</span>';
      } else {
        switchBtn.innerHTML = '<span class="text-fa">فارسی</span>';
        mobileLangBtn.innerHTML = '<span class="text-fa">تغییر به فارسی</span>';
      }

      updateProductsSubmenu();
      resetHeroAnimation();
      
      if (save) localStorage.setItem('mix_lang', lang);
    }

    function updateProductsSubmenu(category = 'hob') {
      const subs = categories[category][currentLang];
      const container = document.getElementById('products-subs');
      if (!container || !subs) return;
      container.innerHTML = '';
      subs.forEach(sub => {
        const link = document.createElement('a');
        link.href = '#';
        link.className = 'mix-megamenu__sub-item';
        link.textContent = sub.name;
        container.appendChild(link);
      });
    }

    // ==================== HERO TEXT ANIMATION (SIMPLIFIED) ====================
    function typeWriter(element, text, speed) {
      return new Promise(resolve => {
        element.textContent = ''; // شروع خالی
        let i = 0;
        function type() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            setTimeout(type, speed);
          } else {
            resolve();
          }
        }
        type();
      });
    }

    async function runSlide(index) {
      // گرفتن المان‌ها یکبار
      const wrapper = document.querySelector('.mix-hero__content');
      const titleEl = document.getElementById('hero-title-text');
      const subEl = document.getElementById('hero-subtitle-text');
      
      const slides = heroSlides[currentLang];
      const currentSlide = slides[index % slides.length];

      // 1. Fade Out (کامل)
      wrapper.style.opacity = '0';
      await new Promise(r => setTimeout(r, 500)); 

      // 2. تنظیم محتوا (اینستنت)
      titleEl.textContent = currentSlide.title;
      subEl.textContent = ''; // پاک کردن متن قبلی برای تایپ‌رایتر
      
      // 3. Fade In
      wrapper.style.opacity = '1';
      
      // 4. Typewriter Subtitle
      await typeWriter(subEl, currentSlide.subtitle, 40);
      
      // 5. Wait (5 ثانیه)
      await new Promise(r => setTimeout(r, 5000));
      
      // 6. Next Slide
      currentSlideIndex++;
      runSlide(currentSlideIndex);
    }

    function setupHeroTextLoop() {
      runSlide(0);
    }

    function resetHeroAnimation() {
      // ریست شمارنده و شروع دوباره از صفر
      currentSlideIndex = 0;
      // پاک کردن متن‌ها برای جلوگیری از باگ‌های بصری لحظه‌ای
      const subEl = document.getElementById('hero-hero-subtitle-text');
      const titleEl = document.getElementById('hero-title-text');
      if (subEl) subEl.textContent = '';
      if (titleEl) titleEl.textContent = '';
      
      document.querySelector('.mix-hero__content').style.opacity = '1';
      
      setTimeout(() => {
        runSlide(0);
      }, 100);
    }

    function setupHeroVideoLoop() {
      const videoElement = document.getElementById('hero-video');
      if(!videoElement) return;
      videoElement.onended = function() {
        currentVideoIndex++;
        if (currentVideoIndex >= heroVideos.length) currentVideoIndex = 0;
        videoElement.style.opacity = 0;
        setTimeout(() => {
          videoElement.src = heroVideos[currentVideoIndex];
          videoElement.load();
          videoElement.play().then(() => { videoElement.style.opacity = 1; }).catch(() => {});
        }, 500);
      };
      videoElement.onerror = function() { videoElement.onended(); };
    }

    // ==================== MOBILE NAV LOGIC ====================
    function setupMobileNavigation() {
      const navBar = document.getElementById('mobile-nav-bar');
      const hero = document.getElementById('hero-section');
      
      window.addEventListener('scroll', () => {
        const header = document.getElementById('header');
        if(window.scrollY > 50) header.classList.add('mix-header--scrolled');
        else header.classList.remove('mix-header--scrolled');

        if (window.innerWidth < 969) {
          const heroRect = hero.getBoundingClientRect();
          if (heroRect.bottom < window.innerHeight) {
            navBar.classList.add('visible');
          } else {
            navBar.classList.remove('visible');
          }
        }
      });

      const menuBtn = document.getElementById('mobile-menu-trigger');
      const fullMenu = document.getElementById('mobile-menu-full');
      const overlay = document.getElementById('mobile-overlay');
      
      function toggleMobileMenu() {
        fullMenu.classList.toggle('active');
        overlay.classList.toggle('active');
      }
      
      menuBtn.addEventListener('click', toggleMobileMenu);
      overlay.addEventListener('click', toggleMobileMenu);
      
      document.getElementById('mobile-lang-link').addEventListener('click', () => {
        setLanguage(currentLang === 'fa' ? 'en' : 'fa');
        toggleMobileMenu();
      });
      document.getElementById('mobile-theme-link').addEventListener('click', () => {
        setTheme(currentTheme === 'light' ? 'dark' : 'light');
        toggleMobileMenu();
      });
    }

    // ==================== EVENT LISTENERS (DESKTOP) ====================
    document.getElementById('theme-toggle').addEventListener('click', () => setTheme(currentTheme === 'light' ? 'dark' : 'light'));
    document.getElementById('scroll-arrow').addEventListener('click', () => {
      const element = document.getElementById('categories');
      if(element) { element.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
    });

    document.getElementById('lang-trigger').addEventListener('click', e => { e.stopPropagation(); document.getElementById('lang-dropdown').classList.toggle('active'); });
    document.getElementById('switch-lang').addEventListener('click', e => { e.preventDefault(); document.getElementById('lang-dropdown').classList.remove('active'); setLanguage(currentLang === 'fa' ? 'en' : 'fa'); });

    function setupMegaMenu(triggerId, megaId) {
      const trigger = document.getElementById(triggerId);
      const mega = document.getElementById(megaId);
      let timeout;
      trigger.addEventListener('mouseenter', () => { clearTimeout(timeout); timeout = setTimeout(() => mega.classList.add('active'), 150); });
      trigger.addEventListener('mouseleave', () => { clearTimeout(timeout); timeout = setTimeout(() => { if (!mega.matches(':hover')) mega.classList.remove('active'); }, 150); });
      mega.addEventListener('mouseenter', () => { clearTimeout(timeout); mega.classList.add('active'); });
      mega.addEventListener('mouseleave', () => { timeout = setTimeout(() => mega.classList.remove('active'), 150); });
    }

    setupMegaMenu('products-trigger', 'products-mega');
    setupMegaMenu('aftersales-trigger', 'aftersales-mega');
    setupMegaMenu('social-trigger', 'social-dropdown'); 

    document.querySelectorAll('.mix-megamenu__root-item').forEach(item => {
      item.addEventListener('mouseenter', function() {
        document.querySelectorAll('.mix-megamenu__root-item').forEach(i => i.classList.remove('active'));
        this.classList.add('active');
        updateProductsSubmenu(this.getAttribute('data-category'));
      });
    });

    document.addEventListener('click', () => {
      document.getElementById('lang-dropdown').classList.remove('active');
      document.getElementById('social-dropdown').classList.remove('active');
    });

    function setupObservers() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('active');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      
      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }

    init();
  </script>
</body>
</html>
